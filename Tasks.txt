	этот кликкер - лишь малый пазл общей системы
		после завершения - поздравить и показать захваченный объект на стратегической карте (с другими типаи ресурсов и многое другое.....) - как пошаговая игра на стратегической карте
		либо после поражения от n+ уровня показывать уровень захваченного объекта и количество ресурсов которое оно будет приносить на данном уровне... можно потом попытаться переиграть на более высокое значение 
			можно ещё сделать, что бы купленные и прокаченные герои и магия сохранялись после прохоождения уровней 
			и можно было их исполььзовать на следующих боях...
		+ связать с игрой "Медуза"  - так же через мини миссии, будут паралельно данным квестам на карте 
			клккер - защита и захват ресурсов 
			Медуза - подземелья, компания, миссии на поиск артефактов, массии по исследованию областей, спасательные миссии, ...
				прохождение за людей с предметами и небольшим строительством на некоторых миссиях
				прохождение за монстров с прокачкой и мутациями
				+ сделать совместные рейды с другими игроками на миссии
				+ сделать pvp махач как и планировался для Медузы + выделить в отдельную игру затем с ссылкой на это дело

		стратегическая карты с постройкой и модернизацией строений/замков/деревень,...
Итог: будет стратегия, кликер, шутер в одной 2d игре.
	это повысит разнообразие игры.
		

Оптимизации/Рефакторинг:
	> может перенести затемнение экрана для меню в Game.drawAll функцию? 
		это позволит только 1 раз затемнять область + можно будет количество монеток в интерфейсе 
		после затемнения выводить
	
	
Баги:
	> нельзя ударить по мышкам, в области летающей земли
	> иногда звук пропадает, вылечилось заходом в меню
	

	
Высокий приоритет:

	> ремонт строений (кроме главного здания?)
		Ok. иконка молоточка в рамке, при наведении на строение 
			Ok. при наведении должна отображать необходимое коилчество монет для починки = 1/10 от стоимости * (maxHealth - health)
			> при клике - 
				Ok. починить и 
				Ok. потратить монетки + 
				> label потраченных монеток и 
				Ok. звук монеток и починки (стук молотков)
				> анимация починки
		Ok. иконка настроек рядом для upgrade окна 
		Ok. здание должно светиться при наведени, и клик должен открыть окно upgrade

	> upgrade башни: 
		новые длинные луки (увеличение радиуса), 
		добавления лучника в башню (увеличение частоты стрельбы), 
		добавление огненных стрел (поджигают монстров), 
		более прочные материалы (увеличение прочности)
		стрелы из другого материала (увеличение урона)
		там же ремонт и отображение стоимости ремонта (init price - health / init health * init price) / 2


	> Добавить нпц: героя с мечом - для защиты. 
		> золотодобытчиков (с киркой на летающей земле)
			можно прокачивать инструменты (кирка, бур,...)
		> золотособирателей 
			можно прокачивать инструменты сбора (тележки, пылесос)

	> магия: каменная стена, которая остаётся на всегда, пока её не сломают.
		при прокачке повышается хп и защита (и визуальный размер)
		
		> добавить магический удар метеоритом
			можно прокачивать на увеличения числа метеоров (до 5 ?), которые по ширине увеличивают площадь поражение 
				(но падают не одновременно, а равным периодом (в 1 сек) между метеорами)
				
		> добавить магический огненный меч (мышка становиться горящим мечом) - клики по монстрам поджигают их
			можно потом придумать монстров разного типа (водного/каменного, на которых не будет действовать данный эффект)

		> заморозка мобов в лёд, который надо сломать что бы дальше мобам пройти, а кто внутри тем минус хп и 
			замородены пока их не сломают, сами никак... лёд сам расстаит через n времени 

		> поджёчь монстра)))

	> добавить звуки
		Ok. добавить настройки уровня звуков и музыки 
		Ok. постройка зданий: бух
		Ok. сбор монеток 
		Ok. выбр элементов меню
		Ok. добыча монетки
		> падение монетки
		> монетка собрана монстром 
		> уничтожение монстра 
		> звуки от зомби 
		> звуки от кабана 
		> начало новой волны - отдельный звук
		> покупка элемента в магазине
		> удары по монстрам 
		> удары монстров по зданиям
		> спец способность кабана
		> удар спец способности кабана 
		> Game Over
		> фоновая музыка в игре (слабая)
		> фоновая музыка в меню (начинается с нарастаием до заданных показателей)
			


Средний приоритет:
	> в меню добавить кнопку "Save" - а потом загружать то, что было сохранено
		
	> новые виды монстров
		> наземные
			Ok. зомби
			Ok. кабаны
				способность: с 30% встаёт и как бык начинает землю задними копытами гребсти, а потом бежит с пылью и 
					врезается нанося 10-ти кратных урон.
					+ добавить анимацию шатания башни от такого удара.
		> летающие
			Ok. летучие мышки
				летят не по прямой траектории, а зигзагообразно (падают, поднимаются,...)
		> мини боссы
			1. Минотавр
		> стайные мобы
		> магические (стреляют огнеными шарами, которые надо сбивать)
			1. некромант с посохом, стреляет посохом на расстоянии и иногда вызывает 1 из 3-х более мощных заклинаний 



Минимальный приоритет:
	> обломки от ударов по башне
	> добавить отлёт ошмётков при ударе по канату мобами
	> добавить анимацию искр золотых при добычи золота [нейтральная польза, возможно, стоит отказаться от этой идеи]
	> сделать воспроизведение анимации за указаное время, а не хаотичное исполнение - оно пропускает кадры и не факт, что кадры идут друг за другом)
		> синхронизировать анимацию атаки с частотой нанесения урона
	> усорять появление монстров и их скорость к концу волны (линейно)
	> добавить юнит тесты и визуальные тесты
	> нужна защита от макросов мышки на 2x и 3x клик
	> прикольно добавить реакциию мобов на клик по ним - падание, подскоки, кувырки, ...
		добавить логику, на уворачивание/кувырки монстров от мышки (для некоторых типов монстров и мини боссов)
			+ закрывание щитами, сворачивание в клубки для защиты

	> магия: целебный источник, на летающей земле открывается лечебный фонтан, все юниты в радиусе действия исцеляются на n xp в секунду 
		для продвинутого уровня игры (когда много юнитов можно нанимать)


	> Добавить английский язык и смену языков (иконка сверху, в правом углу во время меню)
	> Добавить иконку отключения звука (снизу, в правом углу во время меню)
	
	> проверить доступность свойств классов, может их закрыть private или только для чтения сделать readonly...

Чулан:

	https://www.artstation.com/artwork/q9ELee
	https://gifer.com/ru/gifs/

	прикол с цветом: ctx.filter="hue-rotate(260deg)"; 
	интересный вариант: Draw.ctx.globalCompositeOperation = "xor";

	


-----------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------------------
Сделано:
 Ok. Сделать фон
	Сделать фон у body? или у canvas тега? или отрисовать в canvas?
	разрешение картинки 1988x882 (разрешение экрана 1920x1080) (разрешение chrome окна 1920x937)
		тобишь при разрешении экрана в 4k - будет некрасивая хрень
			при большем размере мы можем центрировать по центру картинку, а остальное заполнить чёрным
	Как будет происходить отображение фона при разных разрешениях и пропорциях?
		особенно при более меньших
			будем ли мы передвигать фон? или будем его обрезать? 
				двигать будет не удобно + бестолково, если нападение со всех сторон происходит
				* значит будем масштабировать в одинаковой пропорции с заполнением чёрным по краям
	Результат: отображаем в пропорции, заполняем фон затемлённой землёй
Ok. наведение на объекты
Ok. time цикл
Ok. Анимации
Ok. пропорции объектов
	ширина экрана 1920
	ширина летающей земли 500 (1/4 ширины экрана)
		1920 / 2 - 500 / 2 = 710 пикселей от границ экрана до земли 
Ok. текст от сбора монеток (+1) зелёным-лаймовым цветом
	Message.Add(messages, new Vector2(mouse.X - 10, mouse.Y - 10), new Message("+" + Coin.costGold));
	rgb(191,255,0)
Ok. структура js файлов
	Ok. нужно разделить функционал по canvas и game logic 
		скорей всего это будет базовый класс с функциями: draw, logic, init, hover, click

		как быть с множественными объектами?
			можно статичныый класс сделать, но тогда придётся постоянно копировать его функционл в новые классы

		WaveData класс

		Решено. расположение неверное, куда идут зомби (нет смещения на середину здания)
		Решено. монетки не собираются зомби
		Решено. урон не наносится зданию
Ok. создать отдельный index.html для тестов
	создать класс для тестов
Ok. меню
	можно ставить игру на паузу - тогда появится меню с пунктами "Продолжить", "Новая игра"
	если волна закончилась, то добавляются пункты "Магазин", "Новая волна"
	если игрок проиграл, то только пункт "Новая игра"
	Ok. добавить кнопку "Меню" в верхний левый угол
Fixed. есть баг с монетками - после выхода из паузы - они исчезают, т.к. они по createdTime удаляются.
	надо поменять на lifeTimeLeft
Ok. сделать несколько видов одного монстра (разные цвета? / небольшие различия?)
	Ok. модернизировать выбор изображения из существующих - лучше передавать скоп картинок внутрь класса Monster, а там рандомом выбирать?
Ok. добавить показ уровня волны
	Ok. 1-ая волна
Ok. добавить показ количества монстров на волне (просто сколько убито из всего) 0/500
Ok. после волный, показывать сообщение - 1-ая волна - пройдено.
	Ok. появляется кнопка магазина 
	Ok. и кнопка - начать следующую волну
Ok. Архитектурный момент по html:
	магазин стал сильно большим и там много функционала по добавлению/исчезновению элементов
	Ok. может пора использовать react?
			стоит ли использовать reduxe? 
				только для html? или для всего?
			Какой react? 
				native или продвинутый?
	Ok. Так же пора использовать less или sass для стилей
	Ok. TypeScript 
Ok. нужно использовать TypeScript что бы не было проблем с тонной ошибок
Ok.у магазина должно быть затемнение заднего фона
Cancel. добавить магазин (вариант 1):
	нужно расписать все возможности, которые можно купить

		> юниты 
			атакующие, 
				маги, лучники, воины
			собирающие монетки, 
			долбящие землю, 
			лечащие, 
				маги, врачи
			ремонтирующие

				* получают опыт для новых уровней, с каждым уровнем повышаются характеристики
				* можно прокачивать каждого юнита отдельно

		> баррикады (колья, стена деревянная)

		> оборонительные башни
			наземные
				 башня как в warcraft у орков, 
			на летающей земле
				 катапульта, 
				 балиста 

		> другие строения 
			магнит на сбор монет, 
			мед блок для лечения юнитов после волны
			бур
			энергетический барьер


		> улучшение клика (увеличение урона, коэффициент сбора монет увеличенный)
			сбор монет при наведении мыши,
			магнит на монеты для мышки

		> магия (
			вызов метеора, 
			улучшение защиты/атаки юнитов и построек на n секунд
			лечение юнита, 
			массовое лечение, 
			ремонт постройки)
cancel. магазин (вариант 2) (покупаются здания на острове + их улучшения, затем в самих зданиях покупаются их содержимое) 
	> храм - улучшения повышают силу клика и заклинаний 
		> пассивные
			> сбор монеток при наведении
			> магнит для монеток
			> поджигание врагов (горят долго)
			> замораживание врагов (медленно передвигаться будут)
			> удал электричеством (по цепочке передаётся)
		> активные заклинания
			> метеорит
			> огненный дождь

			> заморозка
			> цепная молния
			> каменные шипы из под земли

			> лечение
			> ремонт

	> казарма - улучшения усиливают юнитов (при смерти юнитов - их можно воскресить за 10% от стоимость) 
		> рабы для сбора монеток
		> рабы для долбления земли
		> Леголаз - лучник (улучшения увеличивают скорость стрельбы и урон)
		> Паладин - юнит с щитом и мечом (улучшения повышают защиту и хп)
		> Берсерк - атакующий юнит с секирой (улучшения повышают урон, область атаки и хп)
		> Маг - атакующий юнит с жезлом (улучшения повышают урон, дают новые заклинания и увеличивают область атаки)
		> медсестра - лечит юнитов магией (улучшения повышают силу лечения и скорость передвижения)
		> Техник - чинит здания (улучшения повышают скорость восстановления зданий и скорость передвижения)
		
		> Терминатор (дорого) - атакующий робот на гусеничной платформе, сверху - пулемёт (улучшения повышают урон)
		> летающиая тарелка (очень дорого) - атакующий летающий юнит (атакует лучом) (улучшения повышают скорост полёта и урон)

	> строительная фабрика - улучшения увеличивают хп и защиту строений 
		> баррикады (деревянные)
		> стена (деревянная)

		> атакующие
			> башня наземная
			> башня воздушная
			> катапульта
			> балиста

		> бур (для добычи монеток)
		> магнит - для сбора монеток
		> энергетический барьер 

	> Исследовательский центр - позволяет изучать новые виды зданий, юнитов и магии, после чего появляются новые скины
		(надо подглядеть в других играх)
		1. ур (изначальный) - деревянные здания (башня варкрафта), юниты с копьями, луками, с деревянные щитами
			? 1.1 ур - укреплённые деревянные здания, юниты с каменными копьями
		2. ур - каменные здания (башня из казаков), юниты с мечами, арбалетами, улучшенными луками, железными щитами
		3. ур - стальные здания, юниты с мушкетами, саблями
		4. ур - бетонные здания, юниты с автоматами, гранатами
		5. ур - иновационные здания, юниты с лазерами, энергетическими щитами и гранатами


		отдельные улучшения?
			> повышение защиты зданий
			> повышение силы магии (у кликов и у  магических юнитов и зданий)
			> повышение урона юнитов
			> повышение защиты юнитов
			> 
В процессе. Магазин (Вариант 3) - гибрид варианта 1 и 2
	Минусы варианта 2 - необходимость строить здание перед покупкой
	Минусы варианта 1 - было бы классно построить храм на горе и казарму и завод (или нет?)
		Храм позволяет апгрейдить магию, силу клика и изучать новые заклинания
		Казарма позволяет апгрейдить юнитов и нанимать новых персонажей
		Завод позволяет апгрейдить строения и строить новые здания
Ok. добавить кнопку на начало новой волны
Ok. монстры должны разрушать постройки.
Ok. При уничтожении монстров добавить анимацию разлитания энергии вокруг,
	 как в игре Valheim
Ok. добавить анимацию разрушения башни
	Ok. (после 0 хр)
Ok. оживить башню - она должна стрелять по ближайшим врагам
Ok. добавить анимацию атаки башни (стрелой)
Ok. добавить затемнение объектов во время блокировки нажатий
Fail. добавить вибрацию земли при клике (добычи золота)
	[результат с вибрацией по горизонтале и по rotate оказался не очень]
Ok. в волнах выставить отсрочку появления каждого типа монстра, что бы более сложные выходили чуть позже
Ok. создавать монстров разного размера (в диапазоне) + разное хп от размера
	Ok. сделать отрисовку изображения меньше оригинала
	Ok. сделать движение наземных монстров по земле, а не по заданному y
Ok. добавить демо режим: мало монстров, высокая награда за них
Ok. связать скорость анимации со скоростью движения
Ok. сделать прыок кабана заметнее
Ok. сделать анимаю атаки кабанку
Ok. при строительстве отображать радиус стрельбы башни 
Fixed. в режиме строительства, при клике на магазин или меню - выбранная башня ставиться/строиться
Fixed. если поставить башню на середину, то монстры будут бить саму верёвку через башню
Fixed. При отображение надписи "Волна пройдена", если тыкнуть на "Новая волна", то будет тёмный экран пару секунд
	нужно принудительно завершать показ предыдущей надписи при появлении новой надписи.
Fixed. невозможно поставить более одной башни
Ok. добавить затемнение с прозрачным пропаданием пыли от строительства здания и взрыва здания
Ok. дать кабану спец способность +  анимация спец способности
	Ok. анимация облаков пыли при беге 
		Or создавать увеличивающуюся анимацию, и уменшать прозрачность
			каждые n пикселей создавать 
		Or создать 1 анимацию, котора будет перемещаться вслед за кабаном и будет зацикленной с n кадра
			до тех пор пока кабан движется
			90x44
			18 кадров
	Ok. передавать зданиям импульс
		Ok. добавить башне качание от импульса
	Ok. анимация отлёта ошмётков при столкновении 
	Ok. переработать систему срабатывания спец способности - она должна срабатывать в диапазоне, от N пикселей до цели до M пикселей до цели
	Cancel. можно поиграться с шейдерами canvas, что бы изобразить небольшую ударную волну  https://habr.com/ru/post/420847/
		всё оказалось намного сложней, getContext не поддерживает выдачу разных типов для одного canvas, 
			при этои, webGL canvas намного производительней, но и сложней в использовании....
			если хотим его использовать, то нужнен полный переход с 2d на webGL,
			так же в webGL можно сделать освещение через нормали https://developer.mozilla.org/ru/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL
				но трудозатраты на создание нормалей для каждого объекта - может быть через чур высоким
	Cancel. возможно так же стоить добавить доп анимацию атаки, т.к. обычное начало атаки выглядет неэффектно
Ok. отображать урон по юнитам красным цветом без минуса, при сборе монет или получения монет за
	уничтожение монстра - отображать жёлтым цветом + звук
	При покупке здания, плавно уменьшать количество монет на счету
Ok. отображать урон юнитов по зданиям
	Ok. обновить систему нанесения урона монстров, не раз в каждый цикл, а раз в n времени по анимации 
	Ok. всплывающие Label ? будет прикольно и плавно исчезающие, если так сделать все Labels?
	Ok. цветовую схему можно поменять, красный - урон зданиям, зелёный или фиолетовый - урон по монстрам
		Fail. отображать чёрный текст с белым контуром, иначе не видно совсем. - Белый превосходит чёрный 
			чёрный на красном - уже лучше, но тоже не катит в общей массе.
		Fail. зелёный, бирюзовый и фиолетовый смотрится отстойно.
		но красный по зданиям - классно и по монстрам тоже классно, но я не думаю что это хорошо смешивать
		может сделать разные оттенки красного?
		попробовать использовать перламутровый - который переливающийся, анимацией, но я не уверен, что это возможно сделать без шейдеров
Fixed. при надписе GameOver появляется дым у кабанов некоторых, у которых дыма небыло
	дело в smokeScaleSize
Canceled. можно поиграться с шейдерами canvas, что бы изобразить небольшую ударную волну  https://habr.com/ru/post/420847/
		всё оказалось намного сложней, getContext не поддерживает выдачу разных типов для одного canvas, 
			при этои, webGL canvas намного производительней, но и сложней в использовании....
			если хотим его использовать, то нужнен полный переход с 2d на webGL,
			так же в webGL можно сделать освещение через нормали https://developer.mozilla.org/ru/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL
				но трудозатраты на создание нормалей для каждого объекта - может быть через чур высоким
Canceled. может при клике тоже небольшое баловство с шейдером сделать?
Ok (50%). добавить эмоциональное вознаграждение за клик по мобу + за клик по летающей земле
	Ok (50%). добавить анимацию кирки при добычи золота (сияние кирки с блёском)
	Ok (50%). доработать анимацию меча при клике по мобу
Fixed. иконку категории в магазине можно перетащить - нужно добавить запрет на выделение
Fixed. когда долго не заходишь на вкладку, то звук первый долго появляется 
	- он заново грузится в кеш?
		да, судя по Network загрузкам
	- как загрузить аудио только 1 раз?
		нужно перетащить файлы в public папку?
		fail. а если к body Добавить динамически?
			document.getElementsByTagName('body')[0].appendChild(selectingSound);
			непомогло
				это из-за того, что аудио файл через new Audio вызывается?
				https://stackoverflow.com/questions/69760600/how-to-cache-a-webaudio-object-properly
	- эта проблема актуальна и для картинок?
		иконки курсора в base64 он почему то грузит заново, остальные картинки остатся актуальными
		для других картинок - неактуально
	- проблема исчезает, если в body создавать audio тег динамически и его использовать всегда для воспроизведения 
		> можно использовть этот метод + добавить проверку на статус. если нельзя воспроизвести, то создаём новый элемент 
			с новый id и в следующий раз уже выбираем между текущими элементами, который из них свободен 
			(брать элементы по классу+ фильтр по статусу)
			
			ended - закончил ли воспроизведение элемент 
			https://developer.mozilla.org/ru/docs/Web/API/HTMLMediaElement
	Ok. можно попробовать закачать аудио в буфер после загрузки 
		и в следующий раз создавать с буфера Audio объект, если это можно
fixed. иногда мобы "выплывают" из под земли
	monsterSize.height = 0, т.к. изображение не успело загрузиться для тестирования
	Monsters.ts -> init:
		this.typeSizes = {
			[Zombie.name]: new Size(Zombie.images[0].width / Zombie.imageFrames, Zombie.images[0].height),
			[Boar.name]: new Size(Boar.images[0].width / Boar.imageFrames, Boar.images[0].height)
		};
	этот код надо вызывать, когда завершилась загрузка требуемых каринок
Ok. добавить ещё одно строение: баррикада с шипами
Fixed. ничиго не происходит при попытки построить второй объект после перого, когда ещё label не пропал
Ok. при строительстве зданий, их нельзя друг на друга ставить. - нужно отображать красным, если место занято.
fixed. импульс не изменяет отображение других зданий 
fixed. картинка башни имеет висящую в воздухе заднюю-левую опору
Ok. при тестировании выявилось, что картинка может не успеть загрузиться перед началом использования, а потом уже будет поздно
	актуально только для test page. В самой игре идёт ожидание загрузки картинок перед запуском игры
		но при этом, было бы хорошо найти динамический способ загрузки картинок, во время самой работы игры. Ленивой загрузкой.
	частично сделано: пофиксить появление монстра на карте, ведь он появляется с учётом своей высоты
	возможно стоит разделить на картинки, которые нужны к началу игры и те, что могут грузится уже после, в процессе, до своего появления 
		> до своего появления - как это сделать? сейчас картинки в init методах грузятся в начале игры и игра не начнётся, пока некоторые из них не будут загружены
		> если интернет медленный, то lazy загрузка картинокможет только навредить, тем что будет задерживать начало появления некоторых объектов 
			в то же время, ничего плохого может и не быть, если картинка рано или поздно загрузиться...
			а если произойдёт ошибка загрузки картинки? надо же её перезагрузить
	картинка не отображается, потому что в конструкторе передаётся image.width внутрь родительского класса, 
		в width = 0, т.к. картинки ещё нет.
	Решение: 
		> либо контролировать создание объектов (если ещё не загрузился, то не создавать и писать лог)
			проблемы: на страницы тестирования это не прокатит
				контр решение: добавить проверку там 
		> после загрузки картинки, заново записывать размер картинки 
		Selected. брать размер картинки динамически - по get свойству с вычисляемыми значениями
			не у всех моделей, это значение берётся из картинки
			могут быть проблемы с производительностью
Ok. очередь загрузки картинок
	Ok. загружать background раньше начала игры 
	Ok. загружать здания (кроме первых) после окончания первой волный
		> добавить ImageHandler для зданий 
		Ok. Builder картинки 
	Ok. загружать Monsters картинки (explosion) после начала игры 
fail. Cancel. сделать дополнительные 2 разные окраски кабанов 
	(более коричневый с 2 белыми полосами, как у зебры, только шире, в виде молний)
	(и чёрный вариант с серыми пятнами)
Ok. добавить летучую мышку, которая будет летать не по прямой траектории, а зигзагообразно (падают, поднимаются,...)
	с разным количество падения и очень ломанной  тракекторией, что бы сложно было попасть мышкой по ней
	Cancel. настроить поиск целей для башни - только наземные 
	Ok. настроить поиск целей для мыши - только летающая земля и воздушные 
	Cancel. добавить доп окрасу - фиолетовую с чёрными полосами 
	Cancel. добавить доп окрасу - цвета кожи с оранжевым мехом на грудной клетке 
Fixed. земля некликабельна в тестах
	непроходит проверку 
		Waves.isStarted && Waves.delayStartTimeLeft < 0
Fixed. если поставить на паузу, то некоторые монстры достаточно далеко переддвигаются при возврате 
	надо ограничить delayMillesecond в 1 секунду