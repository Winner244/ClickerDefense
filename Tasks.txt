	этот кликкер - лишь малый пазл общей системы
		после завершения - поздравить и показать захваченный объект на стратегической карте (с другими типаи ресурсов и многое другое.....) - как пошаговая игра на стратегической карте
		либо после поражения от n+ уровня показывать уровень захваченного объекта и количество ресурсов которое оно будет приносить на данном уровне... можно потом попытаться переиграть на более высокое значение 
			можно ещё сделать, что бы купленные и прокаченные герои и магия сохранялись после прохоождения уровней 
			и можно было их исполььзовать на следующих боях...
		+ связать с игрой "Медуза"  - так же через мини миссии, будут паралельно данным квестам на карте 
			клккер - защита и захват ресурсов 
			Медуза - подземелья, компания, миссии на поиск артефактов, массии по исследованию областей, спасательные миссии, ...
				прохождение за людей с предметами и небольшим строительством на некоторых миссиях
				прохождение за монстров с прокачкой и мутациями
				+ сделать совместные рейды с другими игроками на миссии
				+ сделать pvp махач как и планировался для Медузы + выделить в отдельную игру затем с ссылкой на это дело

		стратегическая карты с постройкой и модернизацией строений/замков/деревень,...

		после захвата каменного рудника - на всех картах появится взможность строить/модернизировать текущие строения до каменных 
		после захвата железного рудника появится возможность повышать атаку дальше, выше n уровня (без этого, можно будет атаку ток до определённого значения качать)
			....
		новые захваченные локации будут влиять на открытие новых механик игры и на переход на более продвинутый уровень 
			что будет стимулировать игроков проходить старые карты до новых уровней для повышения добычи ископаемых и захвата новых артефактов с новых боссов

		возможно первый кликер будет - лесопилка, а монеты уже потом?
			монеты позволят нанимать юнитов 

		ещё одна локация - храм 
			он позволит использовать магию 

		на каждой локации свои уникальные монстры, арсенал игрока может немного варьироваться от локации 
		
		добавить сражения между двумя базами:
			слева одна база - наша, справа другая - вражеская 
			из ресурсов - золото/деньги, 
			прокачиваем добычу золота, усиливаем оборону, создаём войска, улучшаем технологии, 
				войска создаюстся и идут на вражескую базу, где противник так же пытается победить нас 
			сперва можно сделать современную модель (танки, самолёты, вертолёты, пехота, ракеты) 
			потом в разных эпохах делать и будет отдельно - с начальной эпохи война до конечной

Итог: будет стратегия, кликер, шутер в одной 2d игре.
	это повысит разнообразие игры.
		

Оптимизации/Рефакторинг:
	-

Баги: 
	> после нажатия на ремонт не отображаются кнопки управления соседним зданием, которое накладывается на это
	> во время строительства, если навести на существующее строение, то отобразятся кнопки улучшения, при клике на которые откроется панель улучшения, а здания для строительства будет дальше висеть на мышке
		> можно либо кнопку улучшения не отображать и ремонта 
		> либо при клике на них - убирать режим строительства
	> стрела с динамитом врезалась в летучую мышь, но взрыв отобразился значительно дальше по траектории
		воспроизвелось только 1 раз (летучая мышь была над башней) - в остальных случаях всё норм, если у Земли летучая мышь то норм, если перед башней - то норм 
			когда ближе к центру башни, то есть некоторые отклонения во взрыве (дальше по траектории) - или может это не с этим связано? но если взрыв из-за существа - то стоит в пределах существа взрыв отображать
	> канат от земли не догружается по image Handler

Поменять:
	-
	 

Высокий приоритет:

	> новые виды монстров
		> волна 4. некромант с посохом, 
			> скелетоны.
				поднимая посох вверх, тот набирается зелёной силы от основания до верху и затем нейкромант резко падая на колено ударяет вертикально посох о землю, зелёная магия быстро обратно уходит сверху вниз, в землю 
				и затем если впереди нет зомби, то с зелёной магия появляются 3 скелета с мечами (слабые, но большой урон)
				если есть зомби, то магия зелёная снизу по ним поднимается и заменяет зомби на скелетов с мечом 
					> добавить 3 вида скелетов 
					> создавать только скелетов - за них не давать золота 
			ok. может ему ещё и магию щита зелёного сделать? что бы он закрывался при атаке за него на 3 сек
				ok. при продолжении атаки - магия продлевается
				ok. нехватает анимации снятия щита
				ok. модификатор защиты надо раньше включать
				ok. добавить звук жужжания электричества и магии
					ok. сделать звук циклическим
						ok. при пересоздании надо както объект менять - но лучше текущий объект перезапустить. restart? 
					ok. source.autostart = true;
			ok. стреляет зелёной магия из посоха на расстоянии 
				ok. обновить анимацию посоха при ходьбе 
				ok. обновить анимацию посоха при стрельбе
				ok. Добавить пару кадров в анимацю, а то очень глюково выглядит
				ok. добавить звук электричества во время начала анимации, а то нехватает звука
				ok. переделать анимацию - начинать с плавного подъёма посоъха и начала электричества более плавное (сейчас он резко поднимает посох уже с электричеством)
					ok. попробовать пока 2-3 кадра добавить в начало анимации с нарастанием электричества
			ok. звук ругательства при клике по нём
			ok. иногда вызывает 1 из 2-х более мощных заклинани
			ok. с огнём надо уметь бороться
				ok. Добавить анимацию 
				ok. добавить логику активации - если есть FireModifier прикреплённый
				ok. огонь сбоку отображается, надо подвинуть
				ok. добавить логику сбивания заклинания вызов кислотного дождя если наносится урон (огнём, стрелок башни, игроком)
				ok. можно сделать вспышку зелёной магии в посохе некроманта на середине смахивания огня 
					так что бы оно совпало с исчезновением огня
			ok. кислотный дождь (снимает бафы, накладывает 2 дефаба: уменьшение брони и постепенный урон кислотой)
				некромант поднимает двумя руками посох над головой горизонтально, постепенно вокруг посоха начинает зелёная и тёмно облачная магия крутится, одновремнно с этим, над целью появляется растущее облако 
				если некроманта сбить, то облако так же уменьшится и исчезнет, иначе облако вырастет и будет поливать кислотой и немного молниями сверкать, а некромант закончит анимацию и продолжит стрелять зелёной магией
				ok. отменяется при получении урона 
				ok. отменяется при уничтожении здания
					ok. проверить кабана - у него отменяется спец способность при уничтожении здания?
						он бежит дальше - и таранит канат - ок
				ok. отменяется при завершении волны - добавить тест 
				ok. модификатор
				ok. исчезает через n времени
				ok. наносит урон каплями кислотными - генерирует n штук в секунду
				ok. профиксить - на четвёртой волне (в отдельном тесте - всё норм) 
					ok. при атаке - увеличивается некромант в размерах 
					ok анимация появления облака запаздывает, а потом враз проигрывается
					ok иногда вообще зависает анимация атаке в конце и нету обычной атаки 
					ok иногда облако с анимацией появления и вовсе не появляются
				ok рандом должен работать по кол-ву совершённых атак (сработать на N атаке) потом аздаётся новый N 
				ok. при смене цели - сбрасывать атаки
				ok. sizeScale не учитывается при атаке
				ok. добавить звук грома
				ok. Добавить звук дождя
				ok. добавить в модификатор - усиление урона
		> волна 5. летающие огненные дракончики, поджигающие всё на своём пути 
		> волна 6. дракончики огнедышащие, атакующие всё на своём пути и поджигающие строения и юнитов игрока
		> волна 7. шахматные воины(из Гарри поттреи на шахматной доске) в панцире с щитом от стрел и кликов и рубящие мечом вблизи
		> волна 8. баффер - барабанщик - на кабане - усиливает урон всех монстров в радиусе 500 пикселей (половина карты)
		> волна 9. ледяной элементаль - летает над землёй и замораживает здания, те перестают наносить урон + замораживает юнитов
		
		Минотавр, долбящий своим древесным оружием (так же умеет его в виде щита использовать (на небольшое время) от стрел башни и кликов игрока)
			> добавить реакциию на клик - кувырки, уворачивание от мышки 
			> закрывание оружием от стрел и кликов на время
		> волна 11. муравьи, они валят кучей и забираясь друг на  друга - обходят препятствия сверху не получая урона от баррикад
		> 
		
	> магия: 
		> добавить магический удар метеоритом
			можно прокачивать на увеличения числа метеоров, которые по ширине увеличивают площадь поражение 
				(но падают не одновременно, а равным периодом (в 1 сек) между метеорами)
				либо можно прокачивать размер влияющий на урон 
		> удар молнией 
			> сила молнии (урон и толщена основной линии)
			> радиус расхождения молнии 
			> на сколько монстров перекидывается одна линия в бок 
			> радиус передачи линии в бок 
		> шипы из под земли 
			> сила 
			> радиус 
		> призыв скелетов на n сек 
		> ручная заморозка монстров (нужно удерживать кнопку мыши, что бы сильнее намораживать монстров до состояния льда)
		> каменная стена, которая остаётся на всегда, пока её не сломают.
			при прокачке повышается хп и защита (и визуальный размер)
		> добавить магический огненный меч (мышка становиться горящим мечом) - клики по монстрам поджигают их
			можно потом придумать монстров разного типа (водного/каменного, на которых не будет действовать данный эффект)

		> заморозка мобов в лёд, который надо сломать что бы дальше мобам пройти, а кто внутри тем минус хп и 
			замородены пока их не сломают, сами никак... лёд сам расстаит через n времени 

		> поджёчь монстра)))
	

	> Добавить нпц: 
		> золотодобытчиков (с киркой на летающей земле)
			можно прокачивать инструменты (
				сперва с киркой, 
				потом бур (x3 монет)
				прокачивается скорость добычи
		> золотособирателей 
			можно прокачивать инструменты сбора (
				сперва он вручную нагинается и подбирает монетки, 
				пылесос ручной - позволяет просто проходить монетки, 
				машина-пылесос - позволяет быстрее ездить и притягивать спереди монетки)
				прокачивается скорость
		> героя с мечом - для защиты. 
			подумать о разделении - обычный юнит и герои с опытом 
			лучник 
			маг 
				может снимать дефаб от некроманта - кислотный дождь и убирать негативные эффекты от него
				так же может накладывать щиты на юнитов и здания 
			целитель  (лечить всех)
			техник (чинить здания)
			бард (повышение характеристик юнитов)
		
	> пассивный апгрейд мыши - добавить новый раздел в shop - с видом курсора  
		> пробивающий удар: сколько то 10% урона проходит на последующего моба в той же точке
		> повышение урона
		> огненная мышка 
		> леденящая мышка
		> электромагнитный импульс (при клике в радиусе N создаётся с помощью шейдеров продраггивание визуальное,
			которое наносит урон все монстрам в этой области, чем ближе к курсору тем больше урона,
			даже при промахе + бонусом - сбивает летучих мышей

	> Добавить возможность сноса зданий с возвратом части монет
	
	> добавить строение: Тесла - можно устанавливать не только внизу на земле, но и на летающей земле 
		с поворотом оси относительно центра земли (цель - защита от летающих по бокам земли) 
		бьёт разряом тока, который передаётся по близлежащим монстрам - 
			во время удара током, монстр на 10 миллисекунд не атакует с застыванием attackLeftTime

Средний приоритет:
	> в меню добавить кнопку "Save" - а потом загружать то, что было сохранено - доступно только между волнами
	> Добавить английский и китайский язык и смену языков (иконка сверху, в правом углу во время меню)
	> скилл башни
		> более прочные материалы для Башни
			> полу-железная башня
			> каменная кладка - другой вид башни + увеличение защиты

Минимальный приоритет:
	> когда у основной земли меньше 60%/30% - добавлять анимацию горения построек
	> добавить юнит тесты и визуальные тесты
	> нужна защита от макросов мышки на 2x и 3x клик
	> магия: целебный источник, на летающей земле открывается лечебный фонтан, все юниты в радиусе действия исцеляются на n xp в секунду 
		для продвинутого уровня игры (когда много юнитов можно нанимать)
	> скилл башни: маг
		лёд 
		метеор 
		шипы из земли 
	> усорять появление монстров и их скорость к концу волны (линейно) или может не стоит?
	> добавить управление кнопками в shop (стрелки - выбор элемента или категории, tab - переход между категориями и элементами)
	> управлние на tab ломает текущий функционал управления через стрелки (стрелки преобладают над tab - поээтому не критично)
	
	> после разрушения башни - её стрелы исчезнут в полёте (если это стрела с динамитом то может быть заметно)
		может стоит визуально не показывать здание, а уничтожать только после полного исчезновения всех стрел?

Чулан:

	https://chat.openai.com/
	https://beta.openai.com/docs/guides/images/introduction 	ИИ - есть возможность генерировать картинки через API - может натренировать на генерацию png картинок для игры?
	https://openai.com/dall-e-2/ - не может сгенерироать то что нужно, гугл лучше ищет чем он генерирует
		редактирование существующих картинок работает совершенно неправильно.

	https://www.artstation.com/artwork/q9ELee
	https://gifer.com/ru/gifs/

	прикол с цветом: ctx.filter="hue-rotate(260deg)"; 
	интересный вариант: Draw.ctx.globalCompositeOperation = "xor";

	
	звук космический ну погоди
	private static randomTone(context: AudioContext, gainNode: GainNode){
		const oscillator = context.createOscillator();
		oscillator.type = "sine";
		oscillator.connect(gainNode);            
		oscillator.frequency.value = Helper.getRandom(0, 1000);
		const now = context.currentTime;
		oscillator.start(now);  
		oscillator.stop(now + 0.1);  
	}

-----------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------------------
Сделано:
 Ok. Сделать фон
	Сделать фон у body? или у canvas тега? или отрисовать в canvas?
	разрешение картинки 1988x882 (разрешение экрана 1920x1080) (разрешение chrome окна 1920x937)
		тобишь при разрешении экрана в 4k - будет некрасивая хрень
			при большем размере мы можем центрировать по центру картинку, а остальное заполнить чёрным
	Как будет происходить отображение фона при разных разрешениях и пропорциях?
		особенно при более меньших
			будем ли мы передвигать фон? или будем его обрезать? 
				двигать будет не удобно + бестолково, если нападение со всех сторон происходит
				* значит будем масштабировать в одинаковой пропорции с заполнением чёрным по краям
	Результат: отображаем в пропорции, заполняем фон затемлённой землёй
Ok. наведение на объекты
Ok. time цикл
Ok. Анимации
Ok. пропорции объектов
	ширина экрана 1920
	ширина летающей земли 500 (1/4 ширины экрана)
		1920 / 2 - 500 / 2 = 710 пикселей от границ экрана до земли 
Ok. текст от сбора монеток (+1) зелёным-лаймовым цветом
	Message.Add(messages, new Vector2(mouse.X - 10, mouse.Y - 10), new Message("+" + Coin.costGold));
	rgb(191,255,0)
Ok. структура js файлов
	Ok. нужно разделить функционал по canvas и game logic 
		скорей всего это будет базовый класс с функциями: draw, logic, init, hover, click

		как быть с множественными объектами?
			можно статичныый класс сделать, но тогда придётся постоянно копировать его функционл в новые классы

		WaveData класс

		Решено. расположение неверное, куда идут зомби (нет смещения на середину здания)
		Решено. монетки не собираются зомби
		Решено. урон не наносится зданию
Ok. создать отдельный index.html для тестов
	создать класс для тестов
Ok. меню
	можно ставить игру на паузу - тогда появится меню с пунктами "Продолжить", "Новая игра"
	если волна закончилась, то добавляются пункты "Магазин", "Новая волна"
	если игрок проиграл, то только пункт "Новая игра"
	Ok. добавить кнопку "Меню" в верхний левый угол
Fixed. есть баг с монетками - после выхода из паузы - они исчезают, т.к. они по createdTime удаляются.
	надо поменять на lifeTimeLeft
Ok. сделать несколько видов одного монстра (разные цвета? / небольшие различия?)
	Ok. модернизировать выбор изображения из существующих - лучше передавать скоп картинок внутрь класса Monster, а там рандомом выбирать?
Ok. добавить показ уровня волны
	Ok. 1-ая волна
Ok. добавить показ количества монстров на волне (просто сколько убито из всего) 0/500
Ok. после волный, показывать сообщение - 1-ая волна - пройдено.
	Ok. появляется кнопка магазина 
	Ok. и кнопка - начать следующую волну
Ok. Архитектурный момент по html:
	магазин стал сильно большим и там много функционала по добавлению/исчезновению элементов
	Ok. может пора использовать react?
			стоит ли использовать reduxe? 
				только для html? или для всего?
			Какой react? 
				native или продвинутый?
	Ok. Так же пора использовать less или sass для стилей
	Ok. TypeScript 
Ok. нужно использовать TypeScript что бы не было проблем с тонной ошибок
Ok.у магазина должно быть затемнение заднего фона
Cancel. добавить магазин (вариант 1):
	нужно расписать все возможности, которые можно купить

		> юниты 
			атакующие, 
				маги, лучники, воины
			собирающие монетки, 
			долбящие землю, 
			лечащие, 
				маги, врачи
			ремонтирующие

				* получают опыт для новых уровней, с каждым уровнем повышаются характеристики
				* можно прокачивать каждого юнита отдельно

		> баррикады (колья, стена деревянная)

		> оборонительные башни
			наземные
				 башня как в warcraft у орков, 
			на летающей земле
				 катапульта, 
				 балиста 

		> другие строения 
			магнит на сбор монет, 
			мед блок для лечения юнитов после волны
			бур
			энергетический барьер


		> улучшение клика (увеличение урона, коэффициент сбора монет увеличенный)
			сбор монет при наведении мыши,
			магнит на монеты для мышки

		> магия (
			вызов метеора, 
			улучшение защиты/атаки юнитов и построек на n секунд
			лечение юнита, 
			массовое лечение, 
			ремонт постройки)
cancel. магазин (вариант 2) (покупаются здания на острове + их улучшения, затем в самих зданиях покупаются их содержимое) 
	> храм - улучшения повышают силу клика и заклинаний 
		> пассивные
			> сбор монеток при наведении
			> магнит для монеток
			> поджигание врагов (горят долго)
			> замораживание врагов (медленно передвигаться будут)
			> удал электричеством (по цепочке передаётся)
		> активные заклинания
			> метеорит
			> огненный дождь

			> заморозка
			> цепная молния
			> каменные шипы из под земли

			> лечение
			> ремонт

	> казарма - улучшения усиливают юнитов (при смерти юнитов - их можно воскресить за 10% от стоимость) 
		> рабы для сбора монеток
		> рабы для долбления земли
		> Леголаз - лучник (улучшения увеличивают скорость стрельбы и урон)
		> Паладин - юнит с щитом и мечом (улучшения повышают защиту и хп)
		> Берсерк - атакующий юнит с секирой (улучшения повышают урон, область атаки и хп)
		> Маг - атакующий юнит с жезлом (улучшения повышают урон, дают новые заклинания и увеличивают область атаки)
		> медсестра - лечит юнитов магией (улучшения повышают силу лечения и скорость передвижения)
		> Техник - чинит здания (улучшения повышают скорость восстановления зданий и скорость передвижения)
		
		> Терминатор (дорого) - атакующий робот на гусеничной платформе, сверху - пулемёт (улучшения повышают урон)
		> летающиая тарелка (очень дорого) - атакующий летающий юнит (атакует лучом) (улучшения повышают скорост полёта и урон)

	> строительная фабрика - улучшения увеличивают хп и защиту строений 
		> баррикады (деревянные)
		> стена (деревянная)

		> атакующие
			> башня наземная
			> башня воздушная
			> катапульта
			> балиста

		> бур (для добычи монеток)
		> магнит - для сбора монеток
		> энергетический барьер 

	> Исследовательский центр - позволяет изучать новые виды зданий, юнитов и магии, после чего появляются новые скины
		(надо подглядеть в других играх)
		1. ур (изначальный) - деревянные здания (башня варкрафта), юниты с копьями, луками, с деревянные щитами
			? 1.1 ур - укреплённые деревянные здания, юниты с каменными копьями
		2. ур - каменные здания (башня из казаков), юниты с мечами, арбалетами, улучшенными луками, железными щитами
		3. ур - стальные здания, юниты с мушкетами, саблями
		4. ур - бетонные здания, юниты с автоматами, гранатами
		5. ур - иновационные здания, юниты с лазерами, энергетическими щитами и гранатами


		отдельные улучшения?
			> повышение защиты зданий
			> повышение силы магии (у кликов и у  магических юнитов и зданий)
			> повышение урона юнитов
			> повышение защиты юнитов
			> 
В процессе. Магазин (Вариант 3) - гибрид варианта 1 и 2
	Минусы варианта 2 - необходимость строить здание перед покупкой
	Минусы варианта 1 - было бы классно построить храм на горе и казарму и завод (или нет?)
		Храм позволяет апгрейдить магию, силу клика и изучать новые заклинания
		Казарма позволяет апгрейдить юнитов и нанимать новых персонажей
		Завод позволяет апгрейдить строения и строить новые здания
Ok. добавить кнопку на начало новой волны
Ok. монстры должны разрушать постройки.
Ok. При уничтожении монстров добавить анимацию разлитания энергии вокруг,
	 как в игре Valheim
Ok. добавить анимацию разрушения башни
	Ok. (после 0 хр)
Ok. оживить башню - она должна стрелять по ближайшим врагам
Ok. добавить анимацию атаки башни (стрелой)
Ok. добавить затемнение объектов во время блокировки нажатий
Fail. добавить вибрацию земли при клике (добычи золота)
	[результат с вибрацией по горизонтале и по rotate оказался не очень]
Ok. в волнах выставить отсрочку появления каждого типа монстра, что бы более сложные выходили чуть позже
Ok. создавать монстров разного размера (в диапазоне) + разное хп от размера
	Ok. сделать отрисовку изображения меньше оригинала
	Ok. сделать движение наземных монстров по земле, а не по заданному y
Ok. добавить демо режим: мало монстров, высокая награда за них
Ok. связать скорость анимации со скоростью движения
Ok. сделать прыок кабана заметнее
Ok. сделать анимаю атаки кабанку
Ok. при строительстве отображать радиус стрельбы башни 
Ok. добавить звуки
			Ok. добавить настройки уровня звуков и музыки 
			Ok. постройка зданий: бух
			Ok. сбор монеток 
			Ok. выбр элементов меню
			Ok. добыча монетки
Fixed. в режиме строительства, при клике на магазин или меню - выбранная башня ставиться/строиться
Fixed. если поставить башню на середину, то монстры будут бить саму верёвку через башню
Fixed. При отображение надписи "Волна пройдена", если тыкнуть на "Новая волна", то будет тёмный экран пару секунд
	нужно принудительно завершать показ предыдущей надписи при появлении новой надписи.
Fixed. невозможно поставить более одной башни
Ok. добавить затемнение с прозрачным пропаданием пыли от строительства здания и взрыва здания
Ok. дать кабану спец способность +  анимация спец способности
	Ok. анимация облаков пыли при беге 
		Or создавать увеличивающуюся анимацию, и уменшать прозрачность
			каждые n пикселей создавать 
		Or создать 1 анимацию, котора будет перемещаться вслед за кабаном и будет зацикленной с n кадра
			до тех пор пока кабан движется
			90x44
			18 кадров
	Ok. передавать зданиям импульс
		Ok. добавить башне качание от импульса
	Ok. анимация отлёта ошмётков при столкновении 
	Ok. переработать систему срабатывания спец способности - она должна срабатывать в диапазоне, от N пикселей до цели до M пикселей до цели
	Cancel. можно поиграться с шейдерами canvas, что бы изобразить небольшую ударную волну  https://habr.com/ru/post/420847/
		всё оказалось намного сложней, getContext не поддерживает выдачу разных типов для одного canvas, 
			при этои, webGL canvas намного производительней, но и сложней в использовании....
			если хотим его использовать, то нужнен полный переход с 2d на webGL,
			так же в webGL можно сделать освещение через нормали https://developer.mozilla.org/ru/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL
				но трудозатраты на создание нормалей для каждого объекта - может быть через чур высоким
	Cancel. возможно так же стоить добавить доп анимацию атаки, т.к. обычное начало атаки выглядет неэффектно
Ok. отображать урон по юнитам красным цветом без минуса, при сборе монет или получения монет за
	уничтожение монстра - отображать жёлтым цветом + звук
	При покупке здания, плавно уменьшать количество монет на счету
Ok. отображать урон юнитов по зданиям
	Ok. обновить систему нанесения урона монстров, не раз в каждый цикл, а раз в n времени по анимации 
	Ok. всплывающие Label ? будет прикольно и плавно исчезающие, если так сделать все Labels?
	Ok. цветовую схему можно поменять, красный - урон зданиям, зелёный или фиолетовый - урон по монстрам
		Fail. отображать чёрный текст с белым контуром, иначе не видно совсем. - Белый превосходит чёрный 
			чёрный на красном - уже лучше, но тоже не катит в общей массе.
		Fail. зелёный, бирюзовый и фиолетовый смотрится отстойно.
		но красный по зданиям - классно и по монстрам тоже классно, но я не думаю что это хорошо смешивать
		может сделать разные оттенки красного?
		попробовать использовать перламутровый - который переливающийся, анимацией, но я не уверен, что это возможно сделать без шейдеров
Fixed. при надписе GameOver появляется дым у кабанов некоторых, у которых дыма небыло
	дело в smokeScaleSize
Canceled. можно поиграться с шейдерами canvas, что бы изобразить небольшую ударную волну  https://habr.com/ru/post/420847/
		всё оказалось намного сложней, getContext не поддерживает выдачу разных типов для одного canvas, 
			при этои, webGL canvas намного производительней, но и сложней в использовании....
			если хотим его использовать, то нужнен полный переход с 2d на webGL,
			так же в webGL можно сделать освещение через нормали https://developer.mozilla.org/ru/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL
				но трудозатраты на создание нормалей для каждого объекта - может быть через чур высоким
Canceled. может при клике тоже небольшое баловство с шейдером сделать?
Ok (50%). добавить эмоциональное вознаграждение за клик по мобу + за клик по летающей земле
	Ok (50%). добавить анимацию кирки при добычи золота (сияние кирки с блёском)
	Ok (50%). доработать анимацию меча при клике по мобу
Fixed. иконку категории в магазине можно перетащить - нужно добавить запрет на выделение
Fixed. когда долго не заходишь на вкладку, то звук первый долго появляется 
	- он заново грузится в кеш?
		да, судя по Network загрузкам
	- как загрузить аудио только 1 раз?
		нужно перетащить файлы в public папку?
		fail. а если к body Добавить динамически?
			document.getElementsByTagName('body')[0].appendChild(selectingSound);
			непомогло
				это из-за того, что аудио файл через new Audio вызывается?
				https://stackoverflow.com/questions/69760600/how-to-cache-a-webaudio-object-properly
	- эта проблема актуальна и для картинок?
		иконки курсора в base64 он почему то грузит заново, остальные картинки остатся актуальными
		для других картинок - неактуально
	- проблема исчезает, если в body создавать audio тег динамически и его использовать всегда для воспроизведения 
		> можно использовть этот метод + добавить проверку на статус. если нельзя воспроизвести, то создаём новый элемент 
			с новый id и в следующий раз уже выбираем между текущими элементами, который из них свободен 
			(брать элементы по классу+ фильтр по статусу)
			
			ended - закончил ли воспроизведение элемент 
			https://developer.mozilla.org/ru/docs/Web/API/HTMLMediaElement
	Ok. можно попробовать закачать аудио в буфер после загрузки 
		и в следующий раз создавать с буфера Audio объект, если это можно
fixed. иногда мобы "выплывают" из под земли
	monsterSize.height = 0, т.к. изображение не успело загрузиться для тестирования
	Monsters.ts -> init:
		this.typeSizes = {
			[Zombie.name]: new Size(Zombie.images[0].width / Zombie.imageFrames, Zombie.images[0].height),
			[Boar.name]: new Size(Boar.images[0].width / Boar.imageFrames, Boar.images[0].height)
		};
	этот код надо вызывать, когда завершилась загрузка требуемых каринок
Ok. добавить ещё одно строение: баррикада с шипами
Fixed. ничиго не происходит при попытки построить второй объект после перого, когда ещё label не пропал
Ok. при строительстве зданий, их нельзя друг на друга ставить. - нужно отображать красным, если место занято.
fixed. импульс не изменяет отображение других зданий 
fixed. картинка башни имеет висящую в воздухе заднюю-левую опору
Ok. при тестировании выявилось, что картинка может не успеть загрузиться перед началом использования, а потом уже будет поздно
	актуально только для test page. В самой игре идёт ожидание загрузки картинок перед запуском игры
		но при этом, было бы хорошо найти динамический способ загрузки картинок, во время самой работы игры. Ленивой загрузкой.
	частично сделано: пофиксить появление монстра на карте, ведь он появляется с учётом своей высоты
	возможно стоит разделить на картинки, которые нужны к началу игры и те, что могут грузится уже после, в процессе, до своего появления 
		> до своего появления - как это сделать? сейчас картинки в init методах грузятся в начале игры и игра не начнётся, пока некоторые из них не будут загружены
		> если интернет медленный, то lazy загрузка картинокможет только навредить, тем что будет задерживать начало появления некоторых объектов 
			в то же время, ничего плохого может и не быть, если картинка рано или поздно загрузиться...
			а если произойдёт ошибка загрузки картинки? надо же её перезагрузить
	картинка не отображается, потому что в конструкторе передаётся image.width внутрь родительского класса, 
		в width = 0, т.к. картинки ещё нет.
	Решение: 
		> либо контролировать создание объектов (если ещё не загрузился, то не создавать и писать лог)
			проблемы: на страницы тестирования это не прокатит
				контр решение: добавить проверку там 
		> после загрузки картинки, заново записывать размер картинки 
		Selected. брать размер картинки динамически - по get свойству с вычисляемыми значениями
			не у всех моделей, это значение берётся из картинки
			могут быть проблемы с производительностью
Ok. очередь загрузки картинок
	Ok. загружать background раньше начала игры 
	Ok. загружать здания (кроме первых) после окончания первой волный
		> добавить ImageHandler для зданий 
		Ok. Builder картинки 
	Ok. загружать Monsters картинки (explosion) после начала игры 
fail. Cancel. сделать дополнительные 2 разные окраски кабанов 
	(более коричневый с 2 белыми полосами, как у зебры, только шире, в виде молний)
	(и чёрный вариант с серыми пятнами)
Ok. добавить летучую мышку, которая будет летать не по прямой траектории, а зигзагообразно (падают, поднимаются,...)
	с разным количество падения и очень ломанной  тракекторией, что бы сложно было попасть мышкой по ней
	Cancel. настроить поиск целей для башни - только наземные 
	Ok. настроить поиск целей для мыши - только летающая земля и воздушные 
	Cancel. добавить доп окрасу - фиолетовую с чёрными полосами 
	Cancel. добавить доп окрасу - цвета кожи с оранжевым мехом на грудной клетке 
Fixed. земля некликабельна в тестах
	непроходит проверку 
		Waves.isStarted && Waves.delayStartLeftTimeMs < 0
Fixed. если поставить на паузу, то некоторые монстры достаточно далеко переддвигаются при возврате 
	надо ограничить delayMillesecond в 1 секунду

Ok. ремонт строений (кроме главного здания?)
	Ok. иконка молоточка в рамке, при наведении на строение 
		Ok. при наведении должна отображать необходимое коилчество монет для починки = 1/10 от стоимости * (maxHealth - health)
		Ok. при клике - 
			Ok. починить и 
			Ok. потратить монетки + 
			Ok. label потраченных монеток и 
			Ok. звук монеток и починки (стук молотков)
			Ok. анимация починки
	Ok. иконка настроек рядом для upgrade окна 
	Ok. здание должно светиться при наведени, и клик должен открыть окно upgrade
	Fixed. нельзя ударить по мышкам, в области летающей земли
Ok. не отображать занчки ремонта и апгрейда пока идёт затеменение после волны
Ok. анимация за другими строениями появляется и за полоской здоровья. нужно вывести на передний план её.
Fixed. Обновить demo для третей волны 
Fixed. анимацию молотком поменять - сделать более быстрей и наклон молотка поменять
Done. на Enter не начинается игра и нет выбора пункта меню на стрелочки
fixed. иконка обновления перемещается, если зажать мышку и утащить
fixed. если открыто окно апгрейда, то Escape закрывает его, но и открывает меню сразу, что неправильно
fixed. кнопка апгрейда отображается при открытом окне апгрейда 
fixed. если при открытом окне пгрейда тыкнуть на ремонт, то в самом окне апгрейда данные останутся старыми
fixed. неудобно что при клике на кнопку ремонта или апгрейда, нужно убрать мышку со здания и заново завести, что бы появились кнопки заново
fixed. при клике на другом строении, анимации апгрейда остаются
Done. создать класс анимации (входной параметр: картинка, кол-во фреймов, время за которое все фреймы должны выполниться)
	внутри так же будет время начала анимации 
	
	(текущее время - время начала) % timeToShowAnimation / (timeToShowAnimation / frames)
	1577826000000 (1 jan of 2020 00:00:00) - 1577826060000 (1 jan of 2020 00:01:00) = 60000
	1 минута времени 
	frames = 60 
	timeToShowAnimation = 60000
	
	60000 % (60 * 60000) / 60 = 1000
	let frame = Math.floor((Date.now() - timeStart) % durationMs / (durationMs / frames));
Ok. отображать урон башни в информации + радиус действия + скорость стрельбы 
Ok. подсвечивать обновляющееся здание (можно анмацию под зданием - светящееся облако жёлтое)
	Ok. удалить пустое пространство по бокам каждого фрейма
	Cancel. Уменьшить кол-во кадров в 2 кадра
	Cancel. удалить середину анимации во всех кадрах
Ok. в классе зданий нужно добавить функцию которая будет возвращать список dictionary характеристик 
Ok. добавить возможность перемещения окна апгрейда
fixed. в магазине монетки затеменены
fixed. есть некий кейс, стабильно воспроизводится, но только по определённой траектории движения мыши 
	http://localhost:3000/test?v=20
	мышью с левой баррикады передвигаем строго вправо без наклона, до середины башни с умеренной скоростью (не быстро)
	значки аппгрейда и починки у баррикады исчезают, а у башни они не появляются, даже при движении мыши внутри башни 
	
	баг воспроизводится если 2 строения перекрёстно налагаются друг на друга 
		движемся мышкой в зону налажения 
		кнопки с первого строения пропадают (т.к. кнопки в единственном экземпляре существуют) 
			и появляются на строении 2 (у них просто стили меняются на местоположение второго здания)
		при выходе мышки из зоны второго здания, но всё ещё находясь в пределах первого здания, кнопки теряются (
		
			BuildingButtons отображается всегда, а скрывается за счёт стилей для wrapper, 
				размер и позиция которого задаётся размеру и позиции здания (opacity: 0, а при hover: 1)
		
			мешает условие if(!this._isDrawButtons){
			т.к. мышка не выходила из зоны первого здания 
			
			fixed. только сейчас на зонах пересечения логика фигачит много в BuildingButtons, но визуально это не проявляется.
Ok. может перенести затемнение экрана для меню в Game.drawAll функцию? 
	это позволит только 1 раз затемнять область + можно будет количество монеток в интерфейсе выводить после затемнения для магазина
	но монетки нужны только для магазина
fixed. после починки здания - не отображается кнопка модернизациия здания
	вызов BuildingButtons.hide(); в onClickRepair of BuildingButtons.tsx создаёт этот баг 
fixed. при клике на Меню кнопку - первый пункт оказывается выделен, хотя мышка ещё не заходила туда  
fixed иконки ремонта и апгрейда проседают при разрешении экрана меньше 1200 
	- так же они разные для разных по высоте зданий 
		может сделать их одинакового размера?
fixed. при закрытии окна апгрейда, при наведении на то же здание - нету кнопки апгрейда (пока не наведёшь на другое здание)
fixed. пропадает звук, иногда вылечивается заходом в меню 
	сценарий: тыкать на добычу монеток до прихода мобов к канату (ошибок в консоле нету)
	может хром блочит за спам?
		ended событие не срабатывает у таких записей без звука
Ok. зомби
Ok. кабаны
	способность: с 30% встаёт и как бык начинает землю задними копытами гребсти, а потом бежит с пылью и 
		врезается нанося 10-ти кратных урон.
		+ добавить анимацию шатания башни от такого удара.
Ok. летучие мышки
	летят не по прямой траектории, а зигзагообразно (падают, поднимаются,...)
Ok. сделать воспроизведение анимации за указаное время, а не хаотичное исполнение - оно пропускает кадры и не факт, что кадры идут друг за другом)
Ok. синхронизировать анимацию атаки с частотой нанесения урона
fixed. когда землю разрушают _buildingGoal = null при попытке обратиться к .width  в Monsters логике: this.x > this._buildingGoal.x + this._buildingGoal.width - this.width / 5
	this._buildingGoal имеет проверку сыше на null 
fixed. при клике на начало новой волны - надо скрывать меню апгрейда
fixed. если навести на параметр радиус атаки и зажав кнопку апгрейда увести мышку быстро, то радиус остаётся висеть
	disabled кнопка ломает логику вхождения/покидания мышки (спасли другие события мышки: onMosueOver/Out заместо onMouseEnter/Leave)
ok. upgrade башни: 
	ok. добавить кнпоку ремонта к характеристикам хп
		Ok. настроить стили 
	ok. прокачка каждой характеристики в отдельности (колв-во уровней у характеристики + стоимость каждого уровня)
		ok. при наведении показывать стоимость слева 
			ok. если нехватает - показывать красным цветом 
		ok. кол-во потраченных монеток не видно
			Ok. Нужно что бы был не 1 label, а несколько
		ok. добавить звук оплаты
		ok. если недостаточно монеток - disable кнопки
		ok. нужно что-то придумать с наездом текста в Здоровье, если оно неполное
		ok. set яркий style with transition затуханием цвета после апгрейда и ремонта
			ok. как получить текущий элемент? 
			ok. как установить цвет моментально, а потом убрать с затуханием?
				убрать transition
				установить зелёный цвет 
				установить transition
				убрать зелёный цвет
				
				transition: background-color 2s ease;
				background-color: #12a300 !important;
				
				ok. но нужно проверить как будет выглядеть при нескольких быстрых апгрейдах
		ok. при апгрейде здоровья, ремонт удешевлется, т.к. он ведёт расчёт на основе первоначальной цены строения
		ok. при наведении на "Радиус атаки" - показывать этот радиус, как при строительстве 
			ok. MouseIn mouseOut событие на элементе + функции эти в ParameterItem, гду в Tower в них будет записывать true/false для отображения радиуса
		ok. добавить "Защита" и иконку щита (не добавлять улучшение этой опции - оно будет происходить через отдельный скилл)
		ok. уменьшение скорости перезарядки - надо подумать как это ограничить, бесконечно ведь не стоит давать, может уменьшать в процентах от текущего числа?
			или уменьшение в n раз ?
		ok. может improve points - не нужно передавать ? коли у нас функция improve есть....
		ok. прокачка количества лучников - должна увеличивать кол-во разных target-ов при условии, что есть разные монстры 
			иначе пусть одну цель долбят 
		ok. так при разные таржетах должны выбиратся разные типы мобов по земля/воздух
		cancel. добавить башни возможно изменять target  (клик на башню - клик на моба)
			причина: игрок будет терять время кликов на таржетирование целей, которые башня может уничтожить за 1 выстрел - в чём логика? только мешать будет....
			> проверить что бы небыло нечайных нажатий (хотел по мобу, а попал на башню)
			> таржет при разном кол-ве лучников (по порядку таргетировать каждого лучника)
fixed. когда недостаточно монет, цена ремонта сама отображается всегда на панели апгрейда здания и эта цена чёрного цвета, а не красного
ok. добавить 4 звука выстрела стрелой
	если объеденить arrowStrike2Sound и arrowStrike4Sound в один звук то более менее сносно, но при мноожественных башнях и лучниках нужно разбовлять...
		если заменить arrowStrike2Sound на более качественный звук полёта стрелы то будет то что надо
	ok. добавить замедление/ускорение аудио потока 
		ok. для стрел связать это со скоростью стрел
fixed. нужно сделать чёрным фон фона в магазине, т.к. при переключении на другую вкладку, картинка ещё не успела загрузиться и отображается на секунду жёлтый фон. сильное моргание. чёрный помог бы сгладить
fixed. при открытии магазина картинки с широких нормализуютсяв нормальные (видно моргание на эту 1 секунду)
	на это влияет стиль object-fit: contain
	заменил на background стиль
ok. добавить 4 звука меча 
fixed. звуки меча слишком разные, это бьёт по уху. один звук намного лучше воспринимается. 1 или 3 файл звука
	> при множественным ударах разные звуки как буд то не доигрывают до конца, непонятность возникает со звукми, иллюзия прерывания звуков
	заменил на 1 звук, но на кждоый волне он меняется - надо будет проверить - норм или нет при игре?
done. внедрить panner - это сделать звучание объёмным, использовть setPosition для pannerNode
	ok. звуки с левой стороны экрана должны идти преимущественно на левую колонку/наушник, а звуки с право соответственно на правый аудио выход
	Норм, сойдёт пока. главное не переборщить, что бы звук полностью не пропадал на одном из ух, хотя надо эксперементировать...
	ok. Большая проблема: координаты привязаны к координатам внутри canvas, это не равно координатам мыши и само окно браузера может быть уменьшено и перенесено в другую часть экрана, что делать?
		можно не привязываться к экрану, а привязаться к Canvas и пофиг.
ok. может разработать систему лёгкой модификации звка рандомным способом?  что бы не добавлять по 4 каждого звука, а пусть они сами при воспроизведении рандомно модифицируются в буффере
это сэкономит кучу памяти и трафика на хагрузку контента + кучу времени на разработку игры и сильно разнообразит звук, т..к. сейчас 4 звука меча - недостаточно при частых закликах по толпе 
	> имеющиеся по 4 вариации звуков
		норм (там из набора взяты звуки). удар киркой 
		> стрела 
		оставлен один. взрыв монстра 
		оставлен один. удар мечом 
	ok. IIRFilterNode
			пропускает всё в неизменном виде (магнитуда = 1, оба графика линейны)
				1
				1 
				
			понижает громкость до 10%  (магнитуда = 0.1, оба графика линейны)
				0.1
				1 
				
			слегка повысило громкость (магнитуда = 2, оба графика линейны)
				2
				1
				
			стало тише (магнитуда = 0.667, фаза = 0, оба графика линейны)
				1
				1.5
				
			пропускает всё в неизменном виде (магнитуда = 1, фаза = 0, оба графика линейны)
				1.5
				1.5
				
			слегка повысило громкость (магнитуда = 2, оба графика линейны)
				1
				0.5
				
			подняло громкость отдельный частот до слышимого состояния (магнитуда = 3, оба графика линейны)
				1.5
				0.5
				
			подняло громкость всех частот до слышимого состояния (магнитуда = 10, оба графика линейны)
				2
				0.2
				
		Итог: нижнее число уменьшает магнитуду, верхнее - увеличивает	
			фаза наинает меняться только при появлении второго числа
			
			магнитуда после 22000 начала рости с 1 до 8, а на 24000 герц улетела в космос 
			фаза геометрически вырастает до 1.57 к 24000 герц (1 = 23600 герц, 0.1 = 17600)
			звуковых измменений нету
				1.1   1
				1     1
				
			тоже с магнитудой
			фаза так же, но в отрицательную сторону направлена
			звуковых измменений нету
				1 	1.1
				1   1
				
			магнитуда = 1.1, линейна
			фаза = 0, линейна
			звуковых измменений нету
				1.1  1.1
				1 	 1
				
			магнитуда = 2, линейна 
			фаза = 0, линейна
			звуковых измменений нету
				2    2
				1 	 1
				
			магнитуда после 18700 начала рости с 2 до 76, а на 24000 герц улетела в космос 
			фаза плавно вырастает до 1.57 к 24000 герц (1 = 20800 герц, 0.5 = 15700, 0.2 = 8400,0.1 = 4500)
			некоторые звуки стали чуть громче
				2    1
				1 	 1
				
			так же как предыдущее, только магнитуда к 145 выросла, а фаза стала линейно от 0 к 1.5
			звуковых измменений почти нету
				2    0,1
				1 	 1
				
			тоже но фаза отрицательна от 0 к -1.5
			звуковых измменений почти нету
				0,1  2 
				1 	 1
				
		Итого: кол-во ззначений влияет на колв-о точек воздействия на трек, но чем  больше, тем тяжалее получить хоть какой-то нормальный звук
			значения всяким непредсказумемым образом меняют магнитуду и фазу, делаяслышимыми какието звуки попадающие под фильтра
		
		
	ok. https://gist.github.com/chrisguttandin/e49764f9c29376780f2eb1f7d22b54e4
		> OfflineAudioContext
			> startRendering
			работает как создание буффера - для фильтрв не годится
				ошибка different audio context.
					
	> https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API
		> https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Advanced_techniques
		
		> AudioWorklet - для фоновой обработки https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Using_AudioWorklet
		
		> WaveShaperNode https://developer.mozilla.org/en-US/docs/Web/API/WaveShaperNode
			требует массив на вод

		> PeriodicWave https://developer.mozilla.org/en-US/docs/Web/API/PeriodicWave
			> Для оксилиратора, требует 2 массива на вход 
				var realCoeffs = new Float32Array([0,0]); // No DC offset or cosine fundamental freq
				var imagCoeffs = new Float32Array([0,1]); // sine of amplitude 1 at fundamental freq (First imaginary coeff is ignored)
				var wave = context.createPeriodicWave(realCoeffs, imagCoeffs); // will be a simple sine wave	

		> DynamicsCompressorNode https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode
		
		> examples: https://github.com/mdn/webaudio-examples
		
		ok. ConvolverNode  https://developer.mozilla.org/en-US/docs/Web/API/ConvolverNode
			эховый отголосок звука, как призрак. Для использования нужны импульсные буфера. пока не вижу где это можно применить.

		ok. BiquadFilterNode https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode
			непоспевает фильтр сгенерироваться.. есть небольшие задержки иногда
			
			lowpass
			frequency from 12000 to 24000
			Q from  1 to 15
			слух: почти нет отличий
			
			highpass
			frequency from 0 to 125
			Q from  0 to 15
			слух: почти нет отличий, после 200 frequency слышна барабанная дробь
				более бассовый чем lowpass
			
			bandpass
			слух: не удалось нормально настроить, сильно срезает звук при любых настройках
			
			lowshelf
			frequency from 1000 to 24000
			gain from  0 to 4
			слух: есть небольшие отличия
			
			highshelf 
			frequency from 5000 to 24000
			gain from  0 to 10
			слух: есть небольшие чёткие отличия
			отличия как шлепки или дождь по линолиуму
			
			peaking
			frequency from 12000 to 24000
			Q from  1000 to 2500
			gain from  0 to 10
			слух: при завышении gain до 700 слышны писки, длина которых зависитот Q
			при меньших значениям различий не слышно, кроме рандомного delay запуска трека
			
			notch
			frequency from 1000 to 24000
			Q from  1 to 200
			слуш: отбивание мяса молотком (с этими параметрами более менее незаметно)
			
			allpass
			слух:различия не обнаружились
			
			ok. рандомный вариант по разным типам
			
			ok. tone.js
			
			ok. провести сравнительный анализ на слух
				есть почти незаметная разница, очень долго пришлось прислушиваться, что бы разлечить, 
				что с рандомизацией звук разбавляется и уже не одинаков, но в чём отличия почти 
				невозможно разобрать, очень изредка то басовы, то свистовы звук проскакивает
				
	> https://tonejs.github.io/
	
	> https://howlerjs.com/

ok. добавить звук пустого мохания меча в воздухе
ok. звук уничтожение здания
ok. добавить звук исчезновения монстров 
ok. покупка элемента в магазине
ok. удары монстров по зданиям
ok. проверить когда все ресурсы загружаются и составить карту здесь.
	ok. images   (поиск по "/assets/img/")
		ok. FlyEarth.image -> Game.init
		ok. FlyEarthRope -> Game.init
		ok. Coin -> Game.init
		ok. Barricade.image Game.loadResourcesAfterEndOfWave endedWave == 0
		ok. Tower.image Game.loadResourcesAfterEndOfWave endedWave == 0
		ok. Tower.imageArrow -> Game.loadResourcesAfterBuild building == Tower
		ok. Tower.upgrade icons -> need to load Game.loadResourcesAfterBuild building == Tower
		ok. Wave.monstersIcon -> Game.init
		ok. Builder.smoke -> Game.loadResourcesAfterEndOfWave endedWave == 0
		ok. Buildings.explosion -> Game.loadResourcesAfterBuild
		ok. Building.hummer -> Game.loadResourcesAfterEndOfWave if buildings.all.finx(x => x.health < x.healthMax)
		ok. Building.upgrade -> Game.loadResourcesAfterBuild 
		ok. Building.HealthIcon -> Game.loadResourcesAfterBuild 
		ok. Building.ShieldIcon -> Game.loadResourcesAfterBuild 
		ok. Monsters.explosion -> Game.init
		ok. Bat -> Wave.startNewWave if monster in current wave
		ok. Boar -> Wave.startNewWave if monster in current wave
		ok. Boar.attack -> Wave.startNewWave if monster in current wave
		ok. Boar.special -> Wave.startNewWave if monster in current wave
		ok. Boar.specialSmoke -> Wave.startNewWave if monster in current wave
		ok. Boar.specialDamageParticles -> Wave.startNewWave if monster in current wave
		ok. Zombie -> Wave.startNewWave if monster in current wave
	ok. sounds   (поиск по "/assets/sounds/")
		ok. FlyEarth.pick -> Game.init
		ok. Tower.arrow -> Game.loadResourcesAfterBuild building == Tower
		ok. Building.hummer -> Game.loadResourcesAfterEndOfWave if buildings.all.finx(x => x.health < x.healthMax)
		ok. Building.repair -> Game.loadResourcesAfterEndOfWave if buildings.all.finx(x => x.health < x.healthMax)
		ok. monster.hit1-11 -> Game.loadResourcesAfterStartOfWave startedWave == 0
		ok. Builder.build -> Game.loadResourcesAfterEndOfWave endedWave == 0
		ok. Buildings.explosion -> Game.loadResourcesAfterBuild
		ok. Coints.get_coin -> Game.init
		ok. Game.sword_empty -> Game.loadResourcesAfterStartOfWave startedWave == 0
		ok. Monsters.explosion -> Game.init
		ok. Monsters.sword_attack -> Game.init
		ok. Menu.select -> Game.init
			ok. buildingButtons.select  -> Game.init (loaded in Menu)
			ok. Shop.select -> Game.init (loaded in Menu)
			ok. Upgrade.select  -> Game.init (loaded in Menu)
		ok. Upgrade.improve -> Game.loadResourcesAfterBuild
		ok. Zombie.sounds -> AudioSystem.play 

		Game.init запускается после открытия страницы с игрой, где меню с одной кнопкой отображается
ok. добавить 10 звука зомби и рандомно производить их в рандомное время при наличии зомби 
ok. сделать загрузку данных (картинок и звуков для следущей волны во время текущей волны)
	> после постройки здания - грузятся звуки для этого здания
	> звуки ударов - должны грузиться во время первой волны 
	> звук взрыва здания - после постройки первого здания 
	проверить все остальные звуки (поиск по "/assets/sounds/")
ok. сделать привязку громкости удара от damage
ok. добавить 10 звук ударов по зомби 
ok. добавить 10 звука хрюканья кабанов при ударе их мечом
ok. добавить 10 звука хрюканья кабанов
		sound3 - strange
		sound11 - как кудаханье
fixed. в меню можно юзать кнопки ремонта и апгрейда при наведении
ok. добавить звуки спец способность кабана
	ok. останавливать звук бега вместе с остановкой спец способности, как это сделать?
	ok. изучить звуки откладывающиеся по времени 
	ok. добавить проверку перед запуской бега - жив ли кабан ещё? 
	ok. останавливать звук бегапри гибели кабана 
	ok. останавливать звук копыт при гибели кабана
fixed. если посавить на паузу, когда кабаны уже бьют канат и потом снять с паузы - то канат получет от кабанов усиленный урон, как при спец ударе
	с зомби то же вроде больше урона идёт
	> lastAttackedTime основывается на временеи, поэтому после паузы - это время соответственно уходит
	лучше заменить на -= drawsDiffMs
fixed. проверить влияние biquad фильтров на загрузку цп, возможно стоит отказаться от его использования? либо навесить проверку на фпс, что бы отрубать фильтры при понижении фпс
	или через увеличение задержки применения фильтров добиваться улучшения фпс 
	var lastTimeUsedBiquadFilters 
	var delayBetweenBiquadFilters
	припонижении среднего фпс за последние 10 проверок - увеличивать delayBetweenBiquadFilters пропорционально упадку фпс, и обратно - при ровно 60 фпс - уменьшать delay плоть до его отключения
fixed. похоже что _getDistortionCurve больше всех проблем создаёт
	с фпс норм, но теперь звук отрубается
	с отключенным использовнаием _getDistortionCurve - всё норм.
ok. при окончании игры и при открытии меню - нужно ставить звуки boar на паузу
	https://stackoverflow.com/questions/11506180/web-audio-api-resume-from-pause
	fixed. Failed to execute 'start' on 'AudioBufferSourceNode': cannot call start more than once.
	нужно пересоздавать soruce для перезапуска
	если source.buffer - содержит уже изменённые данные под фильтрами, звуком, ... то можно просто с ним пересоздать - иначе надо записывать в source вызов функции _play с теми же самимы параметрами при старте 

	ok. нужно отколибровать и протестить по отдельности delay и offset для каждого элемента 
fixed. проверить все Date.now() - может ли что то ещё порождать проблему на паузе ?
	fixed. labels
	fixed. Animation 
	fixed. Wave 
	fixed. Boar 
	fixed. Builder
	fixed. Building 
	fixed. Monster 
ok. нужно поменять структуру файлов, она неудобна в текущей варианте 
	(нужно логически держать карту в голове, что бы понимать что где лежит, лучше группировать по названию (label, coin, wave, ...), а не по смыслу (system/model/object...)) 
	ok. нужно объеденить всех монстров в одну папку вместе с Monster.ts and Monsters.ts 
	ok. нужно объеденить все строения в одну папку вместе с Building.tx, Buildings.ts and Builder.ts
	ok. Waves + WaveData
	ok. Coins + Coin
	ok. Gamer + Mouse + Cursor + Keypad
	ok. Labels + Label
fixed. после рефакторинга, у кабана исчез дым, хотя анимация дыма вызывается 
ok. именование полей связанных с временем (секунды, миллисекунды, unixtime)
	ok. стоит ли в конец добавлять обозначение Ms, Sec, UnixT ? 
	или полное Milliseconds, Seconds, UnixTime ? 
	или вообще не добавлять в название, только комментарием в описании поля (через /** */)? 
ok. навести порядок в ветках гита
	canceled. удалить лишние 
	canceled. привести версии к 0.1+ 
	ok. проверить что нет неучтённых изменений 
		ok. если есть - описать их тут 
		неучтённые ветки:
			simpleReact - can be deleted
			FlyEarchVibration
			shaders
			animatedSimpleObject - can be deleted
		
		учтённые ветки:
			v0.1
			react_typescript_scss_redux
			v0.2
			v0.00001
			boar_special_ability
			boar_smoke
			building_repair
			upgrade-tower - can be deleted
			v0.4
			v0.5
			v0.6
			v0.7
			sounds
			v0.8
			v0.9
			v0.10
			improvments
			explosion_earch
ok. проверить доступность свойств классов, может их закрыть private или только для чтения сделать readonly...
	ok. закрыть только технические поля, используемые в логике, 
	ok. а поля свойства и другие - открыть
	ok. private методы и поля должны именоваться с нижнего подчёркивания: _improve
		canceled. публичные отделить от закрытых
			объеденены по смыслу
	ok. статичные - не меняющиеся поля можно в readonly константы класса вынести
fixed. http://localhost:3000/test?v=15 (на 6-й раз воспроизводится) проблмеа наблюдается только с левой стороны
	был 2 раза пойман баг, что кабан пробегает мимо баррикады 
	зомби так же проходит иногда мимо, до рефакторинга времени такого небыло
	у FlyEarthRope x = 0
canceled. explosion in buildings/monsters поменять на new AnimatedObject
	сейчас это SimpleObject с size и location 
	у них разная логика отрисовки
ok. нужно делать рандом боле предсказуемым
	ok. пример с кабаном - нужно рандомом задавать заранее место с которого кабан будет спец способность активировать 
	ok. пример с волнами - рандомом задавать время через которое будет следующий монстр создан
fixed. анимация вращения частиц при просмотре данных строения- зависает через время
ok. добавить 10 звука хлопанья крылышками для летучей мышки
	ok. если больше 3 мышей на карте, то можно множественные звуки воспроизвоить, иначе - одиночные
canceled. звуки ходьбы зомби нужны?
canceled. звуки бега кабана без спец способности нужны?
ok. отколибровать все звуки между собой для единой гаммы
ok. добавить звуки
	canceled. падение монетки
	canceled. монетка собрана монстром 
	ok. спец способность кабана
	ok. удар спец способности кабана 
canceled. появилась проблема с зависанием вкладки браузера при горячем обновлении кода
	no. отключить фильтры и проверить проблему 
	no. отключить звуки и проверить проблему 
		баг воспроизводится
	no. может дело в версии NodeJs ? было сделано обновление NodeJs до последней подверсии в версии v14 
	ok. скачки по комитам выявили, что проблема появилась с комитом:
		refactoring + pre-load images and sounds (10.12.2022)
			hide sound after hiding browser tab (10.12.2022) - зависаний нету
			v0.6 - зависания уже есть
	> проблема воспроизводится только при обновлении Monster файла
		если закоментить строку: Monster.loadHitSounds();
		в Game.loadResourcesAfterStartOfWave
		то при обновлении Monster - проблема более не воспроизводится 
		если закоментить всё содержимое Monster.loadHitSounds функции то проблема все-равно актуальна 
		> видимо код не является проблемным, сам процесс горячего обновления крашится 
			с закоменченым кодом есть ошибки в консоли:
				The time must be greater than or equal to the last scheduled time
			может быть это связано?
			
			at assert (Debug.ts:8:1)
			at StateTimeline.add (Timeline.ts:88:1)
			at StateTimeline.setStateAtTime (StateTimeline.ts:54:1)
			at Player.start (Source.ts:193:1)
			at Player.start (Player.ts:178:1)
			at AudioSystem.ts:321:1
			at Array.forEach (<anonymous>)
			at AudioSystem.resumeSounds (AudioSystem.ts:310:1)	
		ошибку пофиксил, но проблема ещё осталась...
			если не обновлять файл монстров, то может норм?
			темболее это только для develop режима проблема
ok. для кнопки улучшения здоровья - цену показывать не сбоку, а сверху, если есть кнопка ремонта
	или лучше - отображать 1 кнопку, если нужен ремонт - то кнопку ремонта.
ok. добавить 3 звука писканья летучей мышки при ударе её мечом
	короткие звуки писка мышей
ok. добавить звуки для Game Over
	-тут-ту-тууууу
ok. начало новой волны - отдельный звук
fixed. resume - на музыке сейчас не работает, она начинает заново играть
	удалено использование нативного AudioBufferSourceNode. только Tone
fixed. после resume - нужно звук как-то обратно поместить в список класса для вызова stop 
	в resume пересоздаётся объект - ли может сам объект подменить что бы ссылка продолжала указывать на верный объект?
	удалено использование нативного AudioBufferSourceNode. только Tone
ok. система автовоспроизведения следующего трека пока завершения текущего
canceled. добавить дерзкую и энергичную фоновую музыку в режиме игры на тихом, ели заметном уровне
	звуков итак много, мне кажется лишь звуковой хлам будет, лишня нагрузка на слух
canceled. добавить фоновую музыку в меню (начинается с нарастаием до заданных показателей) штук 10 композиций разных
	мне кажется в меню это мешать будет. меню нужно для паузы и отойти от компа - звуки и музыка излишни тут
ok. добавить веcёлую и радостную музыку между волн
	> если будут проблемы с воспроизведением следующего трека, то можно добавить logic в MusicSystem и вызывать из Game всегда, а внутри пусть он уже сам определяет - что происходит и как ему реагировать ...
ok. Добавить иконку отключения звука (снизу, в правом углу во время меню)
	она меняет общу громкость на 0 или обратно на предыдущий уровень 
	при изенении ползунка, конка так же должна реагировать 
	иконка должна быть только в магазине и в меню (при заходе в настройки - исчезает ? надо глянуть, может пусть будет )				
canceled. добавить настройки в меню (кажется это излишнее - я ниразу в играх не трогал эти настройки)
	> общая громкость 
	> громкость звуков 
	> громкость музыки
	> ползунок мощности пространственного звука вплоть до отключения (от 0 до 1)
canceled. обломки от ударов по башне (излишне)
	canceled. добавить отлёт ошмётков при ударе по канату мобами
canceled. добавить анимацию искр золотых при добычи золота [нейтральная польза, возможно, стоит отказаться от этой идеи]
fixed. после нажатия на ремонт в окне апгрейда здания, кнопка ремонта продолжает отображаться на самом здании при наведении
ok. в тестах отображать список всех тестов и заменить на i++ в switch case 
ok.улучшения
	ok. отображать картинку апгрейда скила
		ok. название 
		ok. кнопку покупки со стоимостью
		ok. внизу центрированно отображать улучшения в виде одних только цифр и иконок
			+1 <иконка человечка>
			+50% <иконка атаки>
		ok. отображать у связанных характеристик иконки 
		ok. звук улучшения 
		ok. анимация улучшения 
			Builder можно подключить с анимацией 
				есть проблмеа в циклических зависимостях - Cannot access 'actionCreators' before initialization
					при добавлении Builder в Upgrade - возникает ошибка 
						Upgrade юзается в Game, BuildingButtons, Menu
							если убрать Upgrade из BuildingButtons то всё ок, но тогда и окно апгрейда не появляется 
							если убрать только из Game и Menu то ошибка остаётся
							а зачем оно нужно в Game и в Menu ?
							если убрать все зависимости из Upgrade то ошибка остаётся 
						Builder юзается в Game и в TestPage (если в обоих убрать то ошибка остаётся)
							если убрать из него Game и Buildings то всё ок
						BuildingButtons
							он юзается в Game, Building, Buildings, Menu, Upgrade
								Building есть в Upgrade и в Builder 
									Buildings есть только в Builder 
									Menu Нигде нету 
									Game есть только в Builder (если убрать - ничего не меняется)
							если убрать Building из BuildingButtons то ошибка остаётся

						Game так же нельзя заюзать из Upgrade - ошибка та же
				ok. как вариант можно Buildings.all передавать как параметр в Builder.mouseLogic
					Game.loadResourcesAfterBuild можно по идее тоже передавать как параметр
		ok. проверка на стоимость и баланс 
			ok. disable кнопку если нехватает монеток
		ok. отображать некий предмет после улучшения на строении (по координатам) означающий что улучшение проведено 
		ok. отображать купленное улучшение как disabled 
			и подумать как можно его отображать в поощрительном виде, что бы была гордость за покупку, а не пустота от disable
ok. железные шипы для баррикады
	ok. добавить логику уменьшения урона 
	ok. добавить тесты для баррикады апгрейденой: 2 баррикады и 2 зомби, одна апгрейдится через пару сек, через ещё пару сек появляется 2 кабана для каждой баррикады
fixed. звук начала новой волны 
	щёлканье затвора хоть и визуально соотноситсяя и заполняет пустота - но является негативным военным элементом, что для детской игры - лишнее
ok. для большего выбора действий можно добавить прочкаку брони на 0.1 за x2 стоимости
ok. стрелы с динамитом 
	ok. если прокачена огненные стрелы, то этот cкилл будет чередоваться с огненными стрелами (одна стрела горящая, другая с динамитом)
	ok. при попадании в землю, стрела должна взорваться
	ok. урон монстрам в радиусе	
		algorithms like k-d tree or spatial indexing libraries to make it more efficient.
	ok. затестить большой радиус взрыва - насколько сильно будет видно 2x радиус урона и анимации?
		ok. анимация расплываетс, нехватает разрешения картинки (при dynamitRadius = 150 ещё норм)
			ok. но зато она чётко ложится в радиус взрыва 
		ok. урон выходит дальше взрыва, надо до 1.5 уменьшить
ok. добавление огненных стрел (поджигают монстров) + к внешнему виду башни добавляется огненое жерло анимированное
	ok. при попадании в землю, огонь должен вертикально гореть 
	ok. при попадании в монстра, должна поджечь его
	ok. при повторном попадании - должно обновить время жизни 
		canceled. усилить урон
	ok. распространение огня должно передавать время жизни и урон (если время жизни больше или урон больше, то нужно взять большее значение)
		fixed. выглядит не очень, он передаётся визуально странно и быстр осильно и исчезает так же внезапно
			fixed. идёт горящий зомби, взади ещё 2 обычных, пробегает кабан мимо первых двух, на третем поджигается и задней частью туловища поджигает двух других зомби, всё это на быстрой скорости - странно визуально выглядит 
				canceled. нужно добавлять анимацию перекидывания огня 
				ok. и время задержки от начала заражения до первой возможной передачи
			ok. уменьшена область монстра для передачи огня - теперь выглядит норм - когда монстр задевает огонь - тогда он и загорается
			ok. + учтён огонь по высоте - благодаря чему - летучие мышки поджигают мышей выше
		canceled. при затухании добавить доп анимацию 
			canceled. + если с первой стрелы убивает мышку то тоже воспроизводить анимаци затухания
		ok. нужно внешний размер менять
		> при попадании огненной стрелой по мобам - можно добавить доп анимацию - расхождение небольшого огненного шара, который поджигает рядом стоящих монсров даже если убивает текущего монстра с 1 раза
		fixed. иногда проскакивает баг для кабана, что у него огонь отображается выше чем сам кабан
			this.lifeTimeMs > this._lifeTimeMsInitial из-за чего scale  доходит до 3.5 хотя олжен быть максимум 1 
		> иногда всё-таки нехватает анимации передачи огня, но я не представляю как это сделать, многие анимации будут глупо выглядеть.
			дыхание огня?
			прыгающий огонь?
			тупо переместить столп огня?
			переместить с изменением размеров в виде моста? 
	для экономии времени разработки - оменяется добавление двух анимаций для огня 
		расхождение пламени при попадании стрелой в цель (дабы показать почему загораются соседние летучие мышки)
		расхождение потухшего дыма от затухания огня 
ok. скиллы 
	ok. улучшения
		ok. добавить время жизни огня 
		canceled. добавить процент накладываемого урона при добавлении огня (башня стреляет второй раз по горящей толпе - сейчас урон не увеличивается. лишь восстанавливается, а можно сделать % накладываем урона)
		canceled. сделать что бы не каждая стрела была такой, а лишь в % и  что бы можно было прокачивать процент таких стрел
			> Нужно поэксперементировать с этим - может это и вовсе не нужно?
				1 через 1 - вполне норм справляется башня 
				> это будет выглядеть как недокупленная вещь, проданная пустышка. хотя если 1/3 может ещё норм будет. 1/5 - уже непонятно. 1/10 - точно не стоит того.
		ok. добавить прокачку увеличения урона этими видами стрел 
		ok. для динамита добавить прокачку радиуса взрыва
skip. при открытии окна улучшения баррикады или башни какое то безумное падение фпс происходит до 6 - после закрытия окна улучшения - нормализуется до 60
	> при стрельбе огненными стрелами - та же история
	> в тестах то же появились зависания - что происходит? такого небыло в прошлый раз при тестировании огня
	> на старых коментах до Improvments ветки, от которо она взята, на v0.7, на v0.5 - на которых всё было ок, сейчас та же проблема, фпс до 8 падает при открытии окна улучшения строения 
		причём в самой игре - всё норм, нет зависаний, даже на третей волне с динамитом - всё ок 
		но с огнём виснит
			нужно проверить: дело ли там в картинке огня?
				да, из-за картинки, что интереное - сократив до 7 фреймов огня - он выглядит даже красивее чем с 35 фреймами

		переутановка хрома с удалением всех пользовательских данных - совершенно не помогла - может дело в версии хрома?
			после обновления firefox - там та же проблема появилась
				будем ждать пока пофиксят - я репорт в хроме отправил
		что такого мощного в окне улучшения строений?
			1 строчка в Building вызывает зависания: Building.upgradeAnimation.draw(drawsDiffMs, isGameOver, x - this.width / 2, y - this.height / 10, this.width * 2, this.height + this.height / 10)
				без этой строки фпс стабильно 60
				при вычлинении всей логики - только рисование - все равно до 5 падает фпс - кажется проблема в размере изображения 2мб 35820 пикселей в ширину
				уменьшение картинки в 2 раза до 17910 пикселей в ширину и 1.76мб - увеличило фпс до 13
				уменьшение картинки до 10 кадров 3980 пикселей в ширину - 375кб - увеличило фпс до 60
				взял исходное изображение - удалил всё с него - стало весить 11кб - фпс падает до 8 - проблема в ширине картинки, канвас перестал справляться с вырезкой картинки
ok. не давать строить у границ экрана за 100 пикселей
ok. при окончании хп самой земли - сделать взрыв сверхновой на весь экран
fixed. с выключенным звуком поставил на паузу (через Esc) в момент взрыва баррикады, потом попытался снять с паузы через Esc - но ничего не вышло. в консоли ошибка: 
		The time must be greater than or equal to the last scheduled time
		at AudioSystem.ts:293:1
	так же в консоли много предупреждений: 
		Debug.ts:62 The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio. 
	с паузы удалось снять кликом мыши по крестику, но звук появился и я не могу его отключить 

	проблема время от времени воспроизводится при паузе с отключенным звуком
ok. добавить сохранение выключенного звука хотя бы в sessionStorage + при возврате с другой вкладке - включать звук только если он был включен
	fixed. при возврате с другой вкладке отображается выключенный звук, хотя он включен
ok. фпс просел до 25 на четвёртой волне
	на старых проверенных версиях так же - на тот момент я сидел за ноутом который почти разрядился
		при подключении провода зарядки - фпс увеличился до 90 - видимо requestAnimationFrame берёт частоту обновления экрана
	
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Справочная
	> кнопки ремонта и апгрейда находятся в /reactApp/components/BuildingButtons/BuildingButtons.tsx
		Отображаются по логике в /gameApp/gameObjects/Building.ts -> mouseLogic
		
	> запуск хром без cross ограничений для локальных файлов (если нужно потестить отдельно)
		закрвыаем хром
		 cd 'C:\Program Files\Google\Chrome\Application'
		.\chrome.exe --allow-file-access-from-files
		
	> AudioSystem.ts -> createIIRFilter функция - тяжеловесная, стопорит на ~1сек весь JS
		> возможно стоит изучить AudioWorklet для фонового создания фильтров

	